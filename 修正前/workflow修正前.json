{
    "nodes": [
        {
            "parameters": {
                "rule": {
                    "interval": [
                        {
                            "field": "hours",
                            "hoursInterval": 24
                        }
                    ]
                }
            },
            "id": "d2167378-5bfa-45c0-8be6-cfc1284cfa15",
            "name": "Schedule Trigger",
            "type": "n8n-nodes-base.scheduleTrigger",
            "typeVersion": 1,
            "position": [
                784,
                400
            ]
        },
        {
            "parameters": {
                "url": "https://news.yahoo.co.jp/rss/topics/it.xml",
                "options": {}
            },
            "id": "a646de0a-c034-4d48-bcb5-69cfce4e1aef",
            "name": "RSS Read",
            "type": "n8n-nodes-base.rssFeedRead",
            "typeVersion": 1.2,
            "position": [
                992,
                400
            ]
        },
        {
            "parameters": {
                "promptType": "define",
                "text": "=ä»¥ä¸‹ã¯æœ€æ–°ã®ITãƒ‹ãƒ¥ãƒ¼ã‚¹RSSãƒ‡ãƒ¼ã‚¿ã®1ä»¶ã§ã™ã€‚\nã‚¿ã‚¤ãƒˆãƒ«: {{ $json.topicsTitle }}\nURL: {{ $json.articleUrl }}\nå†…å®¹: {{ $json.detailText }}\n\nã“ã‚Œã‚’å…ƒã«ã€ä»¥ä¸‹ã®JSONãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§å›ç­”ã—ã¦ãã ã•ã„ã€‚\n{\n  \"summary_140\": \"Xï¼ˆTwitterï¼‰ã§RTã•ã‚Œã‚„ã™ãã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼ˆå¿™ã—ã„çµŒå–¶è€…ã‚„ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ï¼‰ã®ç›®ã‚’å¼•ã140æ–‡å­—ä»¥å†…ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹è¦ç´„\",\n  \"opinion\": \"ã“ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã«å¯¾ã™ã‚‹ã€è¾›å£ã§æœ¬è³ªã‚’çªãã‚ˆã†ãªã‚ªãƒ”ãƒ‹ã‚ªãƒ³ã€‚å˜ãªã‚‹æ„Ÿæƒ³ã§ã¯ãªãã€ãƒ“ã‚¸ãƒã‚¹çš„ãªç¤ºå”†ã‚’å«ã‚ã‚‹ã“ã¨ã€‚\",\n  \"source_url\": \"{{ $json.articleUrl }}\"\n}\n\nãªãŠã€å‡ºåŠ›ã¯å¿…ãšJSONã®ã¿ã¨ã—ã€ä½™è¨ˆãªãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚„ãƒ†ã‚­ã‚¹ãƒˆã¯å«ã‚ãªã„ã§ãã ã•ã„ã€‚",
                "hasOutputParser": true
            },
            "id": "fc6233c3-12ac-46ab-a494-cddfbf7d45cf",
            "name": "Basic LLM Chain",
            "type": "@n8n/n8n-nodes-langchain.chainLlm",
            "typeVersion": 1.4,
            "position": [
                2224,
                368
            ]
        },
        {
            "parameters": {
                "select": "channel",
                "channelId": {
                    "__rl": true,
                    "value": "ãƒ†ã‚¹ãƒˆé€šçŸ¥",
                    "mode": "name"
                },
                "text": "=ã€ğŸš¨ ä»Šæ—¥ã®ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€‘\nğŸ“ è¦ç´„:\n{{ $json.output.summary_140 }}\n\nğŸ’¡ ã‚ªãƒ”ãƒ‹ã‚ªãƒ³:\n{{ $json.output.opinion }}\n\nğŸ”— ã‚½ãƒ¼ã‚¹:\n{{ $json.output.source_url }}",
                "otherOptions": {}
            },
            "id": "ffe18709-5ea8-429d-acb4-3a7567c8a175",
            "name": "Slack",
            "type": "n8n-nodes-base.slack",
            "typeVersion": 2.2,
            "position": [
                2592,
                368
            ],
            "webhookId": "b5a346a4-f0ca-4c83-bbea-35fe60db3182",
            "credentials": {
                "slackApi": {
                    "id": "IO5z8DPrn0fTaTot",
                    "name": "Slack account"
                }
            }
        },
        {
            "parameters": {},
            "type": "n8n-nodes-base.limit",
            "typeVersion": 1,
            "position": [
                1584,
                368
            ],
            "id": "7b2d0063-34a8-4103-9b0c-e897d623f919",
            "name": "Limit"
        },
        {
            "parameters": {
                "modelName": "models/gemini-2.5-flash-lite",
                "options": {}
            },
            "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
            "typeVersion": 1,
            "position": [
                2224,
                560
            ],
            "id": "9ec671bf-3caa-4101-a9a4-32db254b2237",
            "name": "Google Gemini Chat Model",
            "credentials": {
                "googlePalmApi": {
                    "id": "Xn0MAcdy1zghqu21",
                    "name": "paid2"
                }
            }
        },
        {
            "parameters": {
                "url": "={{ $json.link }}",
                "options": {}
            },
            "type": "n8n-nodes-base.httpRequest",
            "typeVersion": 4.3,
            "position": [
                1792,
                368
            ],
            "id": "3e073317-28e8-4d3f-b3f9-a458da83fb52",
            "name": "HTTP Request"
        },
        {
            "parameters": {
                "jsCode": "const items = $input.all();\nconst results = [];\nfor (const item of items) {\n  const html = item.json.data;\n  // __PRELOADED_STATE__ ã®ä½ç½®ã‚’ç‰¹å®š\n  const startMarker = 'window.__PRELOADED_STATE__ = ';\n  const startIndex = html.indexOf(startMarker);\n  if (startIndex === -1) {\n    results.push({ json: { error: 'PRELOADED_STATE not found' } });\n    continue;\n  }\n  const endIndex = html.indexOf('</script>', startIndex);\n  const jsonStr = html.slice(startIndex + startMarker.length, endIndex).trim();\n  let state;\n  try {\n    state = JSON.parse(jsonStr);\n  } catch (e) {\n    results.push({ json: { error: 'JSON parse failed: ' + e.message, raw: jsonStr.slice(0, 200) } });\n    continue;\n  }\n  const topicsDetail = state.topicsDetail || {};\n  const article = topicsDetail.article || {};\n  const result = {\n    topicsId: topicsDetail.id,\n    topicsTitle: topicsDetail.title,\n    topicsUrl: topicsDetail.url,\n    topicsCategory: topicsDetail.categoryId,\n    publishedTime: topicsDetail.publishedTime,\n    updatedTime: topicsDetail.updatedTime,\n    detailText: topicsDetail.detailText,\n    articleId: article.id,\n    articleUrl: article.url,\n    articleContentsId: article.contentsId,\n    articleTitle: article.title,\n    articleMediaName: article.mediaName,\n    commentCount: article.comment?.count ?? 0,\n    relatedLinks: (topicsDetail.relatedLinks || []).map(link => ({\n      title: link.title,\n      url: link.url,\n      author: link.author,\n      date: link.date,\n    })),\n    poll: state.pollsModule?.issue ? {\n      title: state.pollsModule.issue.title,\n      totalCount: state.pollsModule.issue.totalCount,\n      choices: state.pollsModule.issue.choices,\n    } : null,\n    subTopics: (state.subTopics?.list || []).map(t => ({\n      id: t.id,\n      title: t.title,\n      url: t.url,\n      isNew: t.isNew,\n    })),\n  };\n  results.push({ json: result });\n}\nreturn results;"
            },
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                2000,
                368
            ],
            "id": "4891e4a2-32be-4970-b733-6e77a8a4ba13",
            "name": "Extract Article Text",
            "onError": "continueRegularOutput"
        },
        {
            "parameters": {
                "jsonSchemaExample": "{\n  \"summary_140\": \"Xï¼ˆTwitterï¼‰ã§RTã•ã‚Œã‚„ã™ãã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼ˆå¿™ã—ã„çµŒå–¶è€…ã‚„ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ï¼‰ã®ç›®ã‚’å¼•ã140æ–‡å­—ä»¥å†…ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹è¦ç´„\",\n  \"opinion\": \"ã“ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã«å¯¾ã™ã‚‹ã€è¾›å£ã§æœ¬è³ªã‚’çªãã‚ˆã†ãªã‚ªãƒ”ãƒ‹ã‚ªãƒ³ã€‚å˜ãªã‚‹æ„Ÿæƒ³ã§ã¯ãªãã€ãƒ“ã‚¸ãƒã‚¹çš„ãªç¤ºå”†ã‚’å«ã‚ã‚‹ã“ã¨ã€‚\",\n  \"source_url\": \"{{ $json.articleUrl }}\"\n}"
            },
            "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
            "typeVersion": 1.3,
            "position": [
                2368,
                560
            ],
            "id": "8b092068-e4e5-47f1-a894-cf0b1b91e15c",
            "name": "Structured Output Parser"
        },
        {
            "parameters": {
                "inputText": "={{ $json.title }}",
                "categories": {
                    "categories": [
                        {
                            "category": "relevant",
                            "description": "AIé–¢é€£"
                        },
                        {
                            "category": "non-relevant",
                            "description": "AIã«é–¢ä¿‚ã®ãªã„æƒ…å ±"
                        }
                    ]
                },
                "options": {
                    "enableAutoFixing": true
                }
            },
            "type": "@n8n/n8n-nodes-langchain.textClassifier",
            "typeVersion": 1.1,
            "position": [
                1216,
                384
            ],
            "id": "423ee9a4-a5c2-4110-bac7-f101e06e717f",
            "name": "Text Classifier",
            "retryOnFail": true,
            "onError": "continueErrorOutput"
        },
        {
            "parameters": {
                "modelName": "models/gemini-2.5-flash-lite",
                "options": {}
            },
            "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
            "typeVersion": 1,
            "position": [
                1216,
                560
            ],
            "id": "e85ae443-ccac-41e4-b6fd-707f471bee58",
            "name": "Google Gemini Chat Model1",
            "credentials": {
                "googlePalmApi": {
                    "id": "Xn0MAcdy1zghqu21",
                    "name": "paid2"
                }
            }
        },
        {
            "parameters": {},
            "type": "n8n-nodes-base.noOp",
            "typeVersion": 1,
            "position": [
                1600,
                528
            ],
            "id": "454492fd-47c7-4cc9-9e7b-75e0db88e33a",
            "name": "No Operation, do nothing"
        },
        {
            "parameters": {
                "select": "channel",
                "channelId": {
                    "__rl": true,
                    "value": "#ãƒ†ã‚¹ãƒˆé€šçŸ¥",
                    "mode": "name"
                },
                "text": "text classifierã§ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚",
                "otherOptions": {}
            },
            "type": "n8n-nodes-base.slack",
            "typeVersion": 2.4,
            "position": [
                1616,
                704
            ],
            "id": "99308b13-e332-4651-a113-9a304f4437b6",
            "name": "Send a message",
            "webhookId": "feb280d8-3b01-4385-9ca9-61e0c4a3b53e",
            "credentials": {
                "slackApi": {
                    "id": "IO5z8DPrn0fTaTot",
                    "name": "Slack account"
                }
            }
        }
    ],
    "connections": {
        "Schedule Trigger": {
            "main": [
                [
                    {
                        "node": "RSS Read",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "RSS Read": {
            "main": [
                [
                    {
                        "node": "Text Classifier",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Basic LLM Chain": {
            "main": [
                [
                    {
                        "node": "Slack",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Limit": {
            "main": [
                [
                    {
                        "node": "HTTP Request",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Google Gemini Chat Model": {
            "ai_languageModel": [
                [
                    {
                        "node": "Basic LLM Chain",
                        "type": "ai_languageModel",
                        "index": 0
                    }
                ]
            ]
        },
        "HTTP Request": {
            "main": [
                [
                    {
                        "node": "Extract Article Text",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Extract Article Text": {
            "main": [
                [
                    {
                        "node": "Basic LLM Chain",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Structured Output Parser": {
            "ai_outputParser": [
                [
                    {
                        "node": "Basic LLM Chain",
                        "type": "ai_outputParser",
                        "index": 0
                    }
                ]
            ]
        },
        "Text Classifier": {
            "main": [
                [
                    {
                        "node": "Limit",
                        "type": "main",
                        "index": 0
                    }
                ],
                [
                    {
                        "node": "No Operation, do nothing",
                        "type": "main",
                        "index": 0
                    }
                ],
                [
                    {
                        "node": "Send a message",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Google Gemini Chat Model1": {
            "ai_languageModel": [
                [
                    {
                        "node": "Text Classifier",
                        "type": "ai_languageModel",
                        "index": 0
                    }
                ]
            ]
        }
    },
    "pinData": {},
    "meta": {
        "templateCredsSetupCompleted": true,
        "instanceId": "8a67dbbbf9c37ca7f58643379b31e55c3098ddbe44d1bea02335895aa0b36cf9"
    }
}